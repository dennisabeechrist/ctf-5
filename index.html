<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CTF Challenge - Hacker Archives</title>
  <style>
    body { 
      margin:0; 
      padding:0; 
      background:#0c0c0c; 
      color:#00ffcc; 
      font-family:'Courier New', monospace; 
    }
    .header {
      background:#111; 
      padding:30px; 
      text-align:center; 
      border-bottom:2px solid #00ffcc;
    }
    .header h1 {
      margin:0;
      font-size:2em;
      color:#00ffcc;
      text-shadow:0 0 10px #00ffcc;
    }
    .container {
      max-width:900px; 
      margin:40px auto; 
      padding:20px; 
      background:#111; 
      border-radius:10px; 
      box-shadow:0 0 20px #00ffcc33;
    }
    .note-box {
      background:#111; 
      border:1px solid #00ffcc; 
      border-radius:10px; 
      padding:25px; 
      margin-top:20px; 
      box-shadow:0 0 15px #00ffcc33;
    }
    .note-box pre {
      background:#0a0a0a;
      padding:20px;
      border-radius:8px;
      border-left:5px solid #ff4500;
      color:#ff4500;
      font-size:16px;
    }
    #z {
      margin-top:30px;
      font-size:22px;
      color:#ff5050;
      font-weight:bold;
      text-align:center;
    }
    .terminal {
      background:#0a0a0a;
      padding:15px;
      border-radius:8px;
      margin-top:20px;
      border:1px solid #00ffcc;
      box-shadow:0 0 10px #00ffcc33;
      color:#00ffcc;
    }
    .terminal span {
      display:block;
      margin-bottom:5px;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Hacker Archives - CTF Challenge</h1>
  </div>

  <div class="container">
    <p>Welcome, challenger. You‚Äôve entered the hacker archives. Somewhere in this system lies a hidden secret. Only those who investigate carefully will uncover it.</p>

    <div class="note-box">
      <h2>Encrypted Archive Log</h2>
      <pre>
Moments pass, but the truth always remains.
In silence, clues whisper their presence.
All it takes is patience.
Mysteries unravel when seen from the right angle.
Invisible threads connect everything.
      </pre>
    </div>

    <div class="terminal">
      <span>> system scan initiated...</span>
      <span>> checking memory segments...</span>
      <span>> analyzing local storage...</span>
      <span>> some keys might be hidden here...</span>
    </div>

    <p id="z"></p>
  </div>

  <script>
    // Create default cookie "c" if it doesn't exist
    if (!document.cookie.split('; ').find(row => row.startsWith("c="))) {
      document.cookie = "c=; path=/";
    }

    // Encrypted flag array
    const q1 = [0x2b,0x25,0x20,0x2a,0x32,0x29,0x2c,0x39,0x39,0x2c,0x3f,0x34];

    function getCookie(k){
      const v = `; ${document.cookie}`;
      const p = v.split(`; ${k}=`);
      if(p.length===2) return p.pop().split(';').shift();
    }

    function decrypt(a,b){
      return a.map((n,i)=>String.fromCharCode(n ^ b.charCodeAt(i % b.length))).join('');
    }

    const key = getCookie("c");
    if(key){
      const x2 = decrypt(q1, key);
      if(x2.startsWith("flag{") && x2.endsWith("}")){
        document.getElementById("z").innerText = "üéâ " + x2;
      } else {
        document.getElementById("z").innerText = "‚ùå Wrong key. Check your value!";
      }
    } else {
      document.getElementById("z").innerText = "Access restricted. Investigate the system environment...";
    }
  </script>
</body>
</html>
