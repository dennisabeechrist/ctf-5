<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CTF Challenge - Hacker Archives</title>
  <style>
    body { 
      background:#111; 
      color:#eee; 
      font-family: 'Courier New', monospace; 
      padding:40px; 
      line-height:1.5;
    }
    .container { max-width:900px; margin:auto; }
    h1 { color:#00ffff; text-align:center; margin-bottom:20px; }
    h2 { color:#0aff9d; margin-top:40px; }
    pre { 
      background:#222; 
      padding:20px; 
      border-radius:10px; 
      border-left:5px solid #0aff9d; 
      font-size:16px;
    }
    .note-box {
      background:#1a1a1a;
      border:1px solid #0aff9d;
      border-radius:10px;
      padding:20px;
      margin-top:20px;
      box-shadow:0 0 15px #0aff9d33;
    }
    #z { 
      margin-top:30px; 
      font-size:20px; 
      color:#ff5050; 
      font-weight:bold;
    }
    .hint {
      color:#888;
      font-size:14px;
      margin-top:10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Hacker Archives - CTF Challenge</h1>
    <p>Welcome, challenger. Within these archives lies a secret code hidden for only the sharpest eyes to find. Your mission is to uncover it.</p>

    <div class="note-box">
      <h2>Archived Note</h2>
      <pre>
Moments pass, but the truth always remains.
In silence, clues whisper their presence.
All it takes is patience.
Mysteries unravel when seen from the right angle.
Invisible threads connect everything.
      </pre>
      <p class="hint">Perhaps the key is already in your environment...</p>
    </div>

    <p id="z"></p>
  </div>

  <script>
    // Create default cookie "c" if it doesn't exist
    if (!document.cookie.split('; ').find(row => row.startsWith("c="))) {
      document.cookie = "c=; path=/";
    }

    const q1 = [0x2b,0x25,0x20,0x2a,0x32,0x29,0x2c,0x39,0x39,0x2c,0x3f,0x34];

    function f1(k){
      const v = `; ${document.cookie}`;
      const p = v.split(`; ${k}=`);
      if(p.length===2) return p.pop().split(';').shift();
    }

    function f2(a,b){
      return a.map((n,i)=>String.fromCharCode(n ^ b.charCodeAt(i % b.length))).join('');
    }

    const x1 = f1("c");
    if(x1){
      const x2 = f2(q1, x1);
      if(x2.startsWith("flag{") && x2.endsWith("}")){
        document.getElementById("z").innerText = "üéâ " + x2;
      } else {
        document.getElementById("z").innerText = "‚ùå Wrong key.";
      }
    } else {
      document.getElementById("z").innerText = "Access restricted. Investigate the archives...";
    }
  </script>
</body>
</html>
