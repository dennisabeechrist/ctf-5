<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CTF Challenge</title>
  <style>
    body {
      background: #111;
      color: #eee;
      font-family: monospace;
      padding: 40px;
    }
    .container {
      max-width: 700px;
      margin: auto;
    }
    h1 {
      color: cyan;
    }
    pre {
      background: #222;
      padding: 15px;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Welcome Challenger</h1>
    <p>
      Below is a note we found in the archives. <br>
      Read carefully ‚Äî maybe the first impression isn‚Äôt the full story.
    </p>

    <pre>
Moments pass, but the truth always remains.
In silence, clues whisper their presence.
All it takes is patience.
Mysteries unravel when seen from the right angle.
Invisible threads connect everything.
    </pre>

    <p id="result"></p>
  </div>

  <script>
    const encryptedFlag = [
      0x2d, 0x30, 0x26, 0x3a, 0x36, 0x62, 0x21, 0x27,
      0x2c, 0x36, 0x2d, 0x67
    ];

    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
    }

    function decrypt(enc, key) {
      return enc.map((num, i) =>
        String.fromCharCode(num ^ key.charCodeAt(i % key.length))
      ).join('');
    }

    const s = getCookie("session");
    if (s) {
      const flag = decrypt(encryptedFlag, s);
      if (flag.startsWith("flag{") && flag.endsWith("}")) {
        document.getElementById("result").innerText = "üéâ " + flag;
      } else {
        document.getElementById("result").innerText = "‚ùå Wrong key.";
      }
    } else {
      document.getElementById("result").innerText = "Access restricted.";
    }
  </script>
</body>
</html>
