<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CTF Challenge</title>
  <style>
    body {
      background: #111;
      color: #eee;
      font-family: monospace;
      padding: 40px;
    }
    .container {
      max-width: 700px;
      margin: auto;
    }
    h1 {
      color: cyan;
    }
    pre {
      background: #222;
      padding: 15px;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Welcome Challenger</h1>
    <p>
      Below is a note we found in the archives. <br>
      Read carefully ‚Äî maybe the first impression isn‚Äôt the full story.
    </p>

    <pre>
Moments pass, but the truth always remains.
In silence, clues whisper their presence.
All it takes is patience.
Mysteries unravel when seen from the right angle.
Invisible threads connect everything.
    </pre>

    <p id="z"></p>
  </div>

  <script>
    const q1 = [
      0x2d, 0x30, 0x26, 0x3a, 0x36, 0x62, 0x21, 0x27,
      0x2c, 0x36, 0x2d, 0x67
    ];

    function f1(k) {
      const v = `; ${document.cookie}`;
      const p = v.split(`; ${k}=`);
      if (p.length === 2) return p.pop().split(';').shift();
    }

    function f2(a, b) {
      return a.map((n, i) =>
        String.fromCharCode(n ^ b.charCodeAt(i % b.length))
      ).join('');
    }

    const x1 = f1("s");
    if (x1) {
      const x2 = f2(q1, x1);
      if (x2.startsWith("flag{") && x2.endsWith("}")) {
        document.getElementById("z").innerText = "üéâ " + x2;
      } else {
        document.getElementById("z").innerText = "‚ùå Wrong key.";
      }
    } else {
      document.getElementById("z").innerText = "Access restricted.";
    }
  </script>
</body>
</html>
